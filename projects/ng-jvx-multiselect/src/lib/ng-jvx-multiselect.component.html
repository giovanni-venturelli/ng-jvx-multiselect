<div class="ng-jvx-multiselect">
<div class="ng-jvx-multiselect-value-container"  [matMenuTriggerFor]="menuRef" #valueContainer>
  <div class="ng-jvx-multiselect-value multi-value-container" *ngIf="multi">
    multi
  </div>
  <div class="ng-jvx-multiselect-value single-value-container" *ngIf="!multi">
    single
  </div>
  <div class="ng-jvx-multiselect-arrow">
    <mat-icon>expand_more</mat-icon>
  </div>
</div>
  <mat-menu #menuRef="matMenu" class="jvx-multiselect-panel">
    <ng-content></ng-content>
      <ng-jvx-option *ngFor="let option of options">
        <!--        <ng-container [ngTemplateOutlet]="optionsTemplate" [ngTemplateOutletContext]="{$implicit: option}"></ng-container>-->
        <ng-container [ngTemplateOutlet]="optionsTemplate? optionsTemplate.template : defaultTemplate"
                      [ngTemplateOutletContext]="{$implicit: option}"></ng-container>
      </ng-jvx-option>
  </mat-menu>

  <ng-content select="[options-template]"></ng-content>
</div>

<ng-template #defaultTemplate let-option>
  {{option.text}}
</ng-template>
<div class="mat-select-test">
  <mat-form-field appearance="legacy">
    <mat-label>Select</mat-label>
    <mat-select>
      <mat-option *ngFor="let option of options" [value]="option.value">{{option.text}}</mat-option>
    </mat-select>
  </mat-form-field>
</div>
